<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>VR Museum</title>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>

  <script>
    /* ===============================
       RECTANGULAR WALLS
    =============================== */
    AFRAME.registerComponent('rectangular-walls', {
      init: function () {
        const el = this.el;
        const width = 20;
        const depth = 24;
        const height = 7;

        const walls = [
          { pos: `0 ${height/2} ${-depth/2}`, rot: '0 0 0', w: width, h: height },
          { pos: `0 ${height/2} ${depth/2}`,  rot: '0 180 0', w: width, h: height },
          { pos: `${-width/2} ${height/2} 0`, rot: '0 90 0', w: depth, h: height },
          { pos: `${width/2} ${height/2} 0`,  rot: '0 -90 0', w: depth, h: height }
        ];

        walls.forEach(w => {
          const wall = document.createElement('a-plane');
          wall.setAttribute('position', w.pos);
          wall.setAttribute('rotation', w.rot);
          wall.setAttribute('width', w.w);
          wall.setAttribute('height', w.h);
          wall.setAttribute('material', {
            color: '#7b2b2b',
            shader: 'flat',
            side: 'double'
          });
          el.appendChild(wall);
        });
      }
    });

    /* ===============================
       PARQUET WOOD FLOOR
    =============================== */
    AFRAME.registerComponent('parquet-floor', {
      init: function () {
        const el = this.el;
        const tileW = 0.8;
        const tileL = 1.2;
        const floorSize = 26;
        const colors = ['#8b5a2b','#9c6b3c','#a97442','#7a4f28'];

        for (let x = -floorSize/2; x < floorSize/2; x += tileW) {
          for (let z = -floorSize/2; z < floorSize/2; z += tileL) {
            const tile = document.createElement('a-plane');
            tile.setAttribute('width', tileW - 0.02);
            tile.setAttribute('height', tileL - 0.02);
            tile.setAttribute('rotation', '-90 0 0');
            tile.setAttribute('position', `${x} -0.01 ${z}`);
            tile.setAttribute('material', {
              color: colors[Math.floor(Math.random()*colors.length)],
              shader: 'flat'
            });
            el.appendChild(tile);
          }
        }
      }
    });

    /* ===============================
       TELEPORT (SAME ROOM)
    =============================== */
    AFRAME.registerComponent('teleport', {
      init: function () {
        this.el.addEventListener('click', () => {
          const rig = document.querySelector('#rig');
          const pos = this.el.getAttribute('position');
          rig.setAttribute('position', { x: pos.x, y: 0, z: pos.z });
        });
      }
    });

    /* ===============================
       TELEPORT TO ROOM 2
    =============================== */
    AFRAME.registerComponent('teleport-room2', {
      init: function () {
        this.el.addEventListener('click', () => {
          document.querySelector('#rig')
            .setAttribute('position', { x: -30, y: 0, z: 0 });
        });
      }
    });
  </script>
</head>

<body>
<a-scene background="color:#000"
         vr-mode-ui="enabled:true"
         renderer="precision: mediump; antialias: false">

  <!-- ASSETS -->
  <a-assets>
    <img id="my-art" src="frame1.jpg">
    <img id="my-art2" src="frame2.jpg">
    <img id="my-art3" src="frame3.jpg">
  </a-assets>

  <!-- LIGHT -->
  <a-entity light="type: ambient; intensity: 1"></a-entity>

  <!-- ===============================
       ROOM 1 (ORIGINAL)
  =============================== -->

  <a-entity parquet-floor></a-entity>

  <a-circle rotation="90 0 0" radius="16" position="0 6 0"
    material="shader: standard; color: #d4eaf7; opacity: 0.7; transparent: true; side: double">
  </a-circle>

  <a-entity rectangular-walls></a-entity>

  <!-- CORNER TRIMS -->
  <a-box position="-10 3.5 -12" width="0.15" height="7" depth="0.15" material="color:#5f1f1f"></a-box>
  <a-box position="10 3.5 -12" width="0.15" height="7" depth="0.15" material="color:#5f1f1f"></a-box>
  <a-box position="-10 3.5 12" width="0.15" height="7" depth="0.15" material="color:#5f1f1f"></a-box>
  <a-box position="10 3.5 12" width="0.15" height="7" depth="0.15" material="color:#5f1f1f"></a-box>

  <!-- TELEPORT PADS -->
  <a-cylinder position="0 0.05 2" radius="0.5" height="0.1" material="color: blue" teleport></a-cylinder>
  <a-cylinder position="0 0.05 -7" radius="0.5" height="0.1" material="color: blue" teleport></a-cylinder>

  <!-- DOOR TELEPORT (TO ROOM 2) -->
  <a-cylinder position="-6.8 0.05 -9"
    radius="0.5" height="0.1"
    material="color: blue"
    teleport-room2></a-cylinder>

  <!-- FRAMES -->
  <a-entity position="-3.6 3 -11.88">
    <a-box width="2.2" height="3.2" depth="0.15" material="color:#c68642"></a-box>
    <a-image src="#my-art" width="2" height="3" position="0 0 0.08"></a-image>
  </a-entity>

  <a-entity position="0 3 -11.88">
    <a-box width="2.5" height="3.2" depth="0.15" material="color:#c68642"></a-box>
    <a-image src="#my-art2" width="2.3" height="3" position="0 0 0.08"></a-image>
  </a-entity>

  <a-entity position="3.6 3 -11.88">
    <a-box width="2.2" height="3.2" depth="0.15" material="color:#c68642"></a-box>
    <a-image src="#my-art3" width="2" height="3" position="0 0 0.08"></a-image>
  </a-entity>

  <!-- ===============================
       ROOM 2 (NEW)
  =============================== -->
  <a-entity position="-30 0 0">

    <a-entity parquet-floor></a-entity>
    <a-circle rotation="90 0 0" radius="16" position="0 6 0"
      material="shader: standard; color: #d4eaf7; opacity: 0.7; transparent: true; side: double">
    </a-circle>

    <a-entity rectangular-walls></a-entity>

    <a-text value="Ancient Gallery - Room 2"
      position="0 5.2 -11.9"
      align="center"
      color="#ffffff"
      width="6"></a-text>

    <!-- RETURN TELEPORT -->
    <a-cylinder position="0 0.05 2"
      radius="0.5" height="0.1"
      material="color: blue"
      teleport></a-cylinder>

  </a-entity>
  <!-- ===============================
     VISIBLE OPEN DOOR (LOOK ONLY)
=============================== -->

<!-- Door frame -->
<a-box position="-9.9 2.4 -9"
        width="0.25" height="4.8" depth="3"
        material="color:#6b2e15"></a-box>

<!-- Door recess depth -->
<a-box position="-9.75 2.4 -9"
        width="0.5" height="4.6" depth="2.8"
        material="color:#3a1c10"></a-box>

<!-- Dark interior (fake next room view) -->
<a-plane position="-9.6 2.4 -9"
         rotation="0 90 0"
         width="2.6" height="4.4"
         material="color:#0a0a0a"></a-plane>

<!-- Open door panel (angled) 
<a-box position="-8.9 2.4 -7.8"
        width="0.08" height="4.2" depth="2.2"
        rotation="0 -110 0"
        material="color:#7a3f1e"></a-box>-->

<!-- Door title -->
<a-text value="Ancient Gallery"
        position="-9.75 5.1 -9"
        rotation="0 90 0"
        align="center"
        color="#ffffff"
        width="4"></a-text>


  <!-- CAMERA -->
  <a-entity id="rig">
    <a-entity camera look-controls position="0 1.6 0">
      <a-cursor fuse="true" fuse-timeout="1500"
        geometry="primitive:ring; radiusInner:0.01; radiusOuter:0.015"
        material="color:red"></a-cursor>
    </a-entity>
  </a-entity>

</a-scene>
</body>
</html>
